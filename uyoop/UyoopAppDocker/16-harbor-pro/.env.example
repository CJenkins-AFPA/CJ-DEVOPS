# ============================================================================
# TP16 - Harbor Production Environment Configuration
# ============================================================================

# --- Domain & SSL Configuration ---
HARBOR_DOMAIN=harbor.example.com
TRAEFIK_DASHBOARD_HOST=monitor.example.com
TRAEFIK_ACME_EMAIL=admin@example.com
TRAEFIK_LOG_LEVEL=INFO

# --- Database Configuration ---
DB_HOST=postgres-primary
DB_PORT=5432
DB_NAME=harbor
DB_USER=postgres
DB_PASSWORD=ChangeMe123!SecurePassword456

# --- Redis Configuration ---
REDIS_HOST=redis-master
REDIS_PORT=6379
REDIS_PASSWORD=ChangeMe123!RedisPassword456

# --- Harbor Core Configuration ---
CORE_SECRET=ChangeMe123!CoreSecret456GenerateWithOpenssl
JOBSERVICE_SECRET=ChangeMe123!JobServiceSecret456GenerateWithOpenssl
HARBOR_ADMIN_PASSWORD=ChangeMe123!HarborAdminPassword456
LOG_LEVEL=info

# --- Registry Storage Backend ---
REGISTRY_CREDENTIAL_USERNAME=admin
REGISTRY_CREDENTIAL_PASSWORD=ChangeMe123!RegistryPassword456
REGISTRY_STORAGE_PROVIDER=s3  # filesystem or s3

# --- S3 Configuration (if using S3 backend) ---
S3_REGION=eu-west-1
S3_BUCKET=harbor-registry-prod
S3_ACCESS_KEY=AKIA123456789ABCDEF
S3_SECRET_KEY=ChangeMe123!S3SecretKey456GenerateFromAWS

# --- LDAP Configuration (Optional) ---
LDAP_URL=
LDAP_SEARCHDN=cn=admin,dc=example,dc=com
LDAP_SEARCH_FILTER=(uid=%s)
LDAP_UID=uid
LDAP_BIND_PASSWORD=

# --- OIDC Configuration (Optional) ---
OIDC_NAME=Azure AD
OIDC_ENDPOINT=https://login.microsoftonline.com/common/oauth2/v2.0
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_SCOPE=openid profile email
OIDC_USER_CLAIM=name
OIDC_GROUPS_CLAIM=groups

# --- Email/Webhook Configuration ---
WEBHOOK_HOST=https://webhook.example.com
WEBHOOK_HOST_PORT=

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=noreply@example.com
SMTP_PASSWORD=ChangeMe123!SmtpPassword456
SMTP_FROM=Harbor Registry <noreply@example.com>
SMTP_INSECURE=false

# --- Monitoring Configuration ---
GRAFANA_USER=admin
GRAFANA_PASSWORD=ChangeMe123!GrafanaPassword456
PROMETHEUS_RETENTION=30d

# --- Trivy Configuration ---
TRIVY_SEVERITY=HIGH,CRITICAL
TRIVY_SCAN_ON_PUSH=true

# --- Timezone & Locale ---
TZ=Europe/Paris
LOCALE=fr_FR.UTF-8

# --- Backup Configuration ---
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# --- High Availability ---
HA_ENABLED=true
HA_MODE=multi-node

# --- Security ---
SESSION_TIMEOUT=43200  # 12 hours in seconds
TOKEN_EXPIRATION=30    # 30 minutes
ENABLE_PROFILE=false
ENABLE_METRICS=true
